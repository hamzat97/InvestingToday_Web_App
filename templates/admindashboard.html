<!DOCTYPE html>
<html lang="en">

<head>
  <title>Dashboard</title>
  <meta charset="utf-8">
  {% load static %}
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">		
  <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css">
  <link rel="icon" type="image/png" size="16x16" href="{% static 'images/logo.png' %}">
  <link rel="stylesheet" href="{% static 'css/bootstrap.css' %}">
	<link rel="stylesheet" href="{% static 'css/styleAD1.css' %}">
  <link rel="stylesheet" href="{% static 'css/styleAD2.css' %}">
</head>

<body>
 <div class="wrapper d-flex align-items-stretch">
  <nav id="sidebar">
   <div class="p-4 pt-5">
    <a href="http://localhost:8000/admindashboard" class="img logo rounded-circle mb-5" style="background-image: url({% static 'images/icon.png' %});"></a>
     <ul class="list-unstyled components mb-5">
      <li class="active">
       <a href="http://localhost:8000/admindashboard"><i class="fas fa-tachometer-alt" id="icons-sidebar"></i>Dashboard</a>
      </li>
      <li class="active">
       <a href="#sm1" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle"><i class="fas fa-user-circle" id="icons-sidebar"></i>My Account</a>
       <ul class="collapse list-unstyled" id="sm1">
        <li>
         <a href="http://localhost:8000/adminchangepassword">Change Password</a>
        </li>
        <li>
         <a href="http://localhost:8000">Log Out</a>
        </li>
       </ul>
      </li>
      <li class="active">
       <a href="#sm2" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle"><i class="fas fa-user-tie" id="icons-sidebar"></i>Admin Management</a>
       <ul class="collapse list-unstyled" id="sm2">
        <li>
         <a href="http://localhost:8000/adminlist">Admin List</a>
        </li>
        <li>
         <a href="http://localhost:8000/adminaddadmin">Add New Admin</a>
        </li>
       </ul>
      </li>
      <li class="active">
       <a href="#sm3" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle"><i class="fas fa-users" id="icons-sidebar"></i>Investor Management</a>
       <ul class="collapse list-unstyled" id="sm3">
        <li>
         <a href="http://localhost:8000/admininvestorlist">Investor List</a>
        </li>
        <li>
         <a href="http://localhost:8000/adminaddinvestor">Add New Investor</a>
        </li>
       </ul>
      </li>
      <li class="active">
       <a href="#sm4" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle"><i class="fas fa-chart-pie" id="icons-sidebar"></i>Invest Management</a>
       <ul class="collapse list-unstyled" id="sm4">
        <li>
         <a href="http://localhost:8000/adminactiveinvestlist">Active Invest List</a>
        </li>
        <li>
         <a href="http://localhost:8000/adminpendinglist">Pending Invest List</a>
        </li>
        <li>
         <a href="http://localhost:8000/adminaddinvestment">Add New Investment</a>
        </li>        
       </ul>
      </li>
      <li class="active">
       <a href="#sm5" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle"><i class="fab fa-cc-amazon-pay" id="icons-sidebar"></i>Payment Management</a>
       <ul class="collapse list-unstyled" id="sm5">
        <li>
         <a href="http://localhost:8000/adminupcomingpayment">Upcoming Payement</a>
        </li>
        <li>
         <a href="http://localhost:8000/adminpendingpayment">Pending Payment</a>
        </li>
        <li>
         <a href="http://localhost:8000/adminalreadypaid">Already Paid</a>
        </li>
       </ul>
      </li>   
      <li class="active">
       <a href="http://localhost:8000/admininterestmanagement"><i class="fas fa-dollar-sign" id="icons-sidebar"></i>Interest Rate Management</a>
      </li>
      <li class="active">
       <a href="http://localhost:8000/adminsendemails"><i class="fas fa-envelope-open-text" id="icons-sidebar"></i>Bulk Email Management</a>
      </li>
      <li class="active">
       <a href="http://localhost:8000/adminterms"><i class="fas fa-file-contract" id="icons-sidebar"></i>Terms & Conditions</a>
      </li>
     </ul>
   </div>
  </nav>
  <div id="content" class="p-4 p-md-5">
   <nav class="navbar navbar-expand-lg navbar-light bg-light" id="navigation-bar">
    <div class="container-fluid">
     <button type="button" id="sidebarCollapse" class="btn btn-primary">
      <i class="fa fa-bars"></i>
      <span class="sr-only">Toggle Menu</span>
     </button>
     <button class="btn btn-dark d-inline-block d-lg-none ml-auto" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <i class="fa fa-bars"></i>
     </button>
     <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="nav navbar-nav ml-auto">
       <li class="nav-item">
        <a class="nav-link" href="http://localhost:8000"><i class="fas fa-sign-out-alt" id="logouticon"></i>Log Out</a>
       </li>
      </ul>
     </div>
    </div>
   </nav>
   <div class="row" id="row1">
    <div class="col-sm-2">
     <div class="card bg-info">
      <div class="card-body">
       <p class="card-title">{{total}}</p>
       <p class="card-text">Total<br>Investor</p>
      </div>
      <div class="card-header">
       <a href="http://localhost:8000/admininvestorlist"><p id="paragraph">More info<i class="fas fa-arrow-alt-circle-right"></i></p></a>
      </div>
     </div>
    </div>
    <div class="col-sm-2">
     <div class="card bg-danger">
      <div class="card-body">
       <p class="card-title">${{all_amount_invested}}</p>
       <p class="card-text">Total Amount<br>Invested</p>
      </div>
      <div class="card-header">
       <a href="http://localhost:8000/totalamountinvested"><p id="paragraph">More info<i class="fas fa-arrow-alt-circle-right"></i></p></a>
      </div>
     </div>
    </div>
    <div class="col-sm-2">
     <div class="card bg-secondary">
      <div class="card-body">
       <p class="card-title">${{all_interest_paid}}</p>
       <p class="card-text">Total Interest<br>Paid</p>
      </div>
      <div class="card-header">
        <a href="http://localhost:8000/totalinterestpaid"><p id="paragraph">More info<i class="fas fa-arrow-alt-circle-right"></i></p></a>
      </div>
     </div>
    </div>
    <div class="col-sm-2">
     <div class="card bg-primary">
      <div class="card-body">
       <p class="card-title">${{active_invested_amount}}</p>
       <p class="card-text">Active Invested<br>Amount</p>
      </div>
      <div class="card-header">
        <a href="http://localhost:8000/activeinvestedamount"><p id="paragraph">More info<i class="fas fa-arrow-alt-circle-right"></i></p></a>
      </div>
     </div>
    </div>
    <div class="col-sm-2">
     <div class="card bg-dark">
      <div class="card-body">
       <p class="card-title">${{total_interest_to_pay}}</p>
       <p class="card-text">Total Interest<br>To Pay</p>
      </div>
      <div class="card-header">
        <a href="http://localhost:8000/totalinteresttopay"><p id="paragraph">More info<i class="fas fa-arrow-alt-circle-right"></i></p></a>
      </div>
     </div>
    </div> 
    <div class="col-sm-2">
     <div class="card bg-warning">
      <div class="card-body">
       <p class="card-title">${{pending_amount}}</p>
       <p class="card-text">Pending<br>Amount</p>
      </div>
      <div class="card-header">
        <a href="http://localhost:8000/pendingamount"><p id="paragraph">More info<i class="fas fa-arrow-alt-circle-right"></i></p></a>
      </div>
     </div>
    </div>
   </div>
   <div class="row" id="row2">
    <div class="col-12"> 
     <div class="card">
      <h4 class="card-header">Account Activation Requests</h4>
      <div class="card-body" style="text-align: center;">
      {% if sur %}
      <table class="table table-striped table-bordered">
       <thead class="thead-dark thead-borderless">
        <tr>
         <th scope="col">SL</th>
         <th scope="col">Full Name</th>
         <th scope="col">Adress</th>
         <th scope="col">Bank Name</th>
         <th scope="col">Date of Request</th>
         <th scope="col" style="text-align: center;">Action</th>
        </tr>
       </thead>
       <tbody>
       {% for r in sur %}
        <tr>
         <th scope="row">{{forloop.counter}}</th>
         <td>{{r.first_name}} {{r.last_name}}</td>
         <td>{{r.adress}}</td>
         <td>{{r.bank_name}}</td>
         <td>{{r.date_of_request}}</td>
         <td style="text-align: center;">
          <form method="post">
           {% csrf_token %}  
           <button type="submit" class="btn btn-sm" name="approve_account{{r.username}}" id="btn1">Approve</button>
           <button type="submit" class="btn btn-sm" name="view_account{{r.username}}" id="btn2">View</button>
           <button type="submit" class="btn btn-sm" name="cancel_account{{r.username}}" id="btn3">Cancel</button>
          </form>
         </td>
        </tr>
       {% endfor %}
       </tbody>
      </table>
      <a href="http://localhost:8000/adminaccountrequests"><button type="button" class="btn btn-block" id="btnblock">All Account Activation Requests<i class="fas fa-arrow-alt-circle-right"></i></button></a>
      {% else %}
       <p style="text-align: center;">There is no requests for creating accounts up to now !!!</p>
      {% endif %}
      </div>
     </div>
    </div>
   </div> 
   <div class="row" id="row2">
    <div class="col-12"> 
     <div class="card">
      <h4 class="card-header">Pending Investment Requests</h4>
      <div class="card-body" style="text-align: center;">
      {% if ir %}
      <table class="table table-striped table-bordered">
       <thead class="thead-dark thead-borderless">
        <tr>
         <th scope="col">SL</th>
         <th scope="col">Investor</th>
         <th scope="col">Amount</th>
         <th scope="col">Date of Request</th>
         <th scope="col">Interest</th>
         <th scope="col">Date of Payment</th>
         <th scope="col" style="text-align: center;">Action</th>
        </tr>
       </thead>
       <tbody>
       {% for i in ir %}
        <tr>
         <th scope="row">{{forloop.counter}}</th>
         <td>{{i.username}}</td>
         <td>{{i.amount_to_invest}}</td>
         <td>{{i.date_of_request}}</td>
         <td>{{i.interest}}</td>
         <td>{{i.date_of_payment}}</td>
         <td style="text-align: center;">
          <form method="post">
           {% csrf_token %}  
           <button type="submit" class="btn btn-sm" name="approve_investment{{i.id}}" id="btn1">Approve</button> 
           <button type="submit" class="btn btn-sm" name="cancel_investment{{i.id}}" id="btn3">Cancel</button>
          </form>         
         </td>
        </tr>
       {% endfor %}
       </tbody>
      </table>
      <a href="http://localhost:8000/adminpendinglist"><button type="button" class="btn btn-block" id="btnblock">All Pending Investment Requests<i class="fas fa-arrow-alt-circle-right"></i></button></a>
      {% else %}
       <p style="text-align: center;">There is no requests for investing money to approve now !!!</p>
      {% endif %}  
      </div>
     </div>
    </div>
   </div>
   <div class="row" id="row3">
    <div class="col-12">   
     <div class="card">
     <h4 class="card-header">Top Investor</h4>
     <div class="card-body" style="text-align: center;">
     {% if top %}
     <table class="table table-striped table-bordered">
      <thead class="thead-dark thead-borderless">
       <tr>
        <th scope="col">SL</th>
        <th scope="col">Username</th>
        <th scope="col">Amount Invested</th>
       </tr>
      </thead>
      <tbody>
       {% for t in top %}
        <tr>
         <th scope="row">{{forloop.counter}}</th>
         <td>{{t.username}}</td>
         <td>{{t.amount_invested}}</td>
        </tr>
       {% endfor %} 
      </tbody>
     </table> 
     {% else %}
      <p style="text-align: center;">No one has invested his money up to now !!!</p>
     {% endif %} 
     </div>
    </div>
   </div>
  </div>
  <div class="row" id="row4"> 
   <div class="col-12">  
    <div class="card">
     <h4 class="card-header">Pending Payment</h4>
    <div class="card-body" style="text-align: center;">
      {% if pp %}
    <table class="table table-striped table-bordered">
     <thead class="thead-dark thead-borderless">
      <tr>
       <th scope="col">SL</th>
       <th scope="col">Investor</th>
       <th scope="col">Amount to Pay</th>
       <th scope="col">Interest</th>
       <th scope="col">Date of Payment</th>
       <th scope="col">Days Left</th>
       <th scope="col" style="text-align: center;">Action</th>
      </tr>
     </thead>
     <tbody>
      {% for p in pp %}
       {% for d in dl %}
        {% if forloop.counter == forloop.parentloop.counter %}
         <tr>
          <th scope="row">{{forloop.counter}}</th>
          <td>{{p.username}}</td>
          <td>{{p.amount_to_get}}</td>
          <td>{{p.interest}}</td>
          <td>{{p.date_of_payment}}</td>
          <td>{{d}} left</td>
          <td style="text-align: center;">
           <form method="post">
            {% csrf_token %}  
            <button type="submit" class="btn btn-sm" name="approve_payment{{p.id}}" id="btn1">Pay</button> 
           </form>         
          </td>
         </tr>
        {% endif %}
       {% endfor %}
      {% endfor %}
     </tbody>
    </table>
    <a href="http://localhost:8000/adminpendingpayment"><button type="button" class="btn btn-block" id="btnblock">All Pending Payment<i class="fas fa-arrow-alt-circle-right"></i></button></a>
    </div>
    {% else %}
     <p style="text-align: center;">There is no one to pay now !!!</p>
    {% endif %}
    </div>
   </div>
  </div>   
  <footer class="text-center text-lg-start" id="footerid">
   <div class="text-center p-3">
    Copyright &copy;<script>document.write(new Date().getFullYear());</script> | InvestingToday | All Rights Reserved
   </div>
  </footer>
  </div>
 </div>
</body>
<script src="{% static 'js/jquery.min.js' %}"></script>
<script src="{% static 'js/bootstrap.min.js' %}"></script>
<script src="{% static 'js/popper.js' %}"></script>
<script src="{% static 'js/main.js' %}"></script>
</html>
